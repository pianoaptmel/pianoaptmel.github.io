{"version":3,"sources":["airtable/create.js","inputStyled.js","InputData.js","airtable/receive.js","style.js","App.js","index.js"],"names":["DivWrapper","sytled","div","TitleWrapper","InputWrapper","input","InputData","props","state","receiveData","handleChange","bind","autoFocus","onKeyPress","this","e","inputValue","target","value","console","log","which","inputId","base","require","apiKey","filterByFormula","concat","select","view","firstPage","GetStudentId","then","result","id","studentId","dataToCreate","create","CreateRecord","window","location","reload","alert","Component","GlobalStyled","createGlobalStyle","App","className","ReactDOM","render","document","getElementById"],"mappings":"sMAAO,I,srBCEA,IAAMA,EAAaC,IAAOC,IAAV,KAQVC,EAAeF,IAAOC,IAAV,KAUZE,EAAeH,IAAOI,MAAV,KC4BVC,E,YA1Cb,WAAYC,GAAQ,IAAD,8BACjB,4CAAMA,KACDC,MAAQ,CACXC,YAAa,IAEf,EAAKC,aAAe,EAAKA,aAAaC,KAAlB,gBALH,E,sEASjB,OACE,6BACE,kBAACX,EAAD,KACE,kBAACG,EAAD,6CACA,kBAACC,EAAD,CAAcQ,WAAS,EAACC,WAAYC,KAAKJ,mB,mCAMpCK,GACX,IAAMC,EAAaD,EAAEE,OAAOC,OAC5BC,QAAQC,IAAI,QAASL,EAAEE,OAAOI,OACd,KAAZN,EAAEM,SACJF,QAAQC,IAAI,sBACZD,QAAQC,IAAIJ,GC9BX,SAAsBM,GAC3B,IACIC,EAAO,IADIC,EAAQ,IACZ,CAAa,CAAEC,OAAQ,sBAAuBF,KACvD,qBAEEG,EAAkB,WAAWC,OAAOL,GAASK,OAAO,MAExD,OAAOJ,EAAK,SACTK,OAAO,CAAEF,kBAAiBG,KAAM,YAChCC,YDsBgBC,CAAaf,GACnBgB,MAAK,SAAAC,GACK,MAAbA,EAAO,IAA8B,MAAhBA,EAAO,GAAGC,IACjCf,QAAQC,IAAI,sBAAuBa,EAAO,GAAGC,IFlC3B,SAACC,GACzB,IAoBMC,EAAe,CACjB,CACE,OAAU,CACR,QAAW,CACPD,MAKV,OA5BS,IADIX,EAAQ,IACZ,CAAa,CAACC,OAAQ,sBAAsBF,KAAK,oBA4BnDA,CAAK,sBAAOc,OAAOD,GEKNE,CAAaL,EAAO,GAAGC,IAC/BF,MAAK,SAAAC,GACXM,OAAOC,SAASC,aAGlBC,MAAM,qE,GAnCQC,a,k2CEFjB,IAAMC,EAAeC,YAAH,KCUVC,MATf,WACE,OACE,yBAAKC,UAAU,OACb,kBAACH,EAAD,MACA,kBAAC,EAAD,QCJNI,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.6f699c06.chunk.js","sourcesContent":["export const CreateRecord = (studentId) => {\n    var Airtable = require('airtable');\n    var base = new Airtable({apiKey: 'key3fX4iWEdGotDwW'}).base('appvWyF7JgnpEYfm2');\n\n    // return base('签到表').create([\n    //     {\n    //       \"fields\": {\n    //         \"Student\": [\n    //             studentId\n    //         ]\n    //       }\n    //     }\n    //   ], function(err, records) {\n    //     if (err) {\n    //       console.error(err);\n    //       return;\n    //     }\n    //     records.forEach(function (record) {\n    //       console.log(record.getId());\n    //     });\n    //   });\n    const dataToCreate = [\n        {\n          \"fields\": {\n            \"Student\": [\n                studentId\n            ]\n          }\n        }\n      ]\n      return base('签到表').create(dataToCreate);\n\n}","import sytled from 'styled-components'\n\nexport const DivWrapper = sytled.div`\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    margin-top: -50px;\n    margin-left: -100px;\n`\n\nexport const TitleWrapper = sytled.div`\n    width: 100%;\n    display: block;\n    font-family: Tahoma;\n    font-size: 39px;\n    color: #555555;\n    line-height: 1.2;\n    text-align: center;\n`\n\nexport const InputWrapper = sytled.input`\n    outline-style: none ;\n    border: 1px solid #ccc; \n    border-radius: 3px;\n    padding: 13px 14px;\n    width: 280px;\n    font-size: 14px;\n    font-weight: 700;\n    font-family: \"Microsoft soft\";\n`\n","import React, { Component } from \"react\";\nimport { GetStudentId } from \"./airtable/receive\";\nimport { CreateRecord } from \"./airtable/create\";\nimport { TitleWrapper, DivWrapper, InputWrapper } from \"./inputStyled\";\n\nclass InputData extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      receiveData: \"\"\n    };\n    this.handleChange = this.handleChange.bind(this);\n  }\n\n  render() {\n    return (\n      <div>\n        <DivWrapper>\n          <TitleWrapper>钢琴公寓签到</TitleWrapper>\n          <InputWrapper autoFocus onKeyPress={this.handleChange} />\n        </DivWrapper>\n      </div>\n    );\n  }\n\n  handleChange(e) {\n    const inputValue = e.target.value;\n    console.log(\"input\", e.target.which);\n    if (e.which === 13) {\n      console.log(\"扫码机\");\n      console.log(inputValue);\n      let recordId = GetStudentId(inputValue);\n      recordId.then(result => {\n        if (result[0] != null && result[0].id != null) {\n          console.log(\"create record for: \", result[0].id);\n          const created = CreateRecord(result[0].id);\n          created.then(result => {\n            window.location.reload();\n          })\n        } else {\n          alert('没有此ID， 请重新输入')\n        }\n      });\n    }\n\n  }\n}\n\nexport default InputData;\n","export function GetStudentId(inputId) {\n  var Airtable = require(\"airtable\");\n  var base = new Airtable({ apiKey: \"key3fX4iWEdGotDwW\" }).base(\n    \"appvWyF7JgnpEYfm2\"\n  );\n  var filterByFormula = \"AND(Id='\".concat(inputId).concat(\"')\");\n\n  return base(\"basic\")\n    .select({ filterByFormula, view: \"RawData\" })\n    .firstPage();\n}\n","import { createGlobalStyle } from \"styled-components\";\n\n\nexport const GlobalStyled = createGlobalStyle`\n    /* reset.css */\n    html, body, div, span, applet, object, iframe,\n    h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n    a, abbr, acronym, address, big, cite, code,\n    del, dfn, em, img, ins, kbd, q, s, samp,\n    small, strike, strong, sub, sup, tt, var,\n    b, u, i, center,\n    dl, dt, dd, ol, ul, li,\n    fieldset, form, label, legend,\n    table, caption, tbody, tfoot, thead, tr, th, td,\n    article, aside, canvas, details, embed, \n    figure, figcaption, footer, header, hgroup, \n    menu, nav, output, ruby, section, summary,\n    time, mark, audio, video {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n    }\n    /* HTML5 display-role reset for older browsers */\n    article, aside, details, figcaption, figure, \n    footer, header, hgroup, menu, nav, section {\n        display: block;\n    }\n    body {\n\n        background-color: #2196F3;\n        line-height: 1;\n    }\n    ol, ul {\n        list-style: none;\n    }\n    blockquote, q {\n        quotes: none;\n    }\n    blockquote:before, blockquote:after,\n    q:before, q:after {\n        content: '';\n        content: none;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 0;\n    }\n`;\n","import React from 'react';\nimport InputData from'./InputData'\nimport {GlobalStyled} from './style.js';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GlobalStyled/>\n      <InputData />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}
{"version":3,"sources":["airtable/create.js","airtable/verify.js","inputStyled.js","InputData.js","airtable/receive.js","style.js","App.js","index.js"],"names":["CreateRecord","studentId","dataToCreate","require","apiKey","base","create","Verify","studentInfomation","name","fields","console","log","filterByFormula","concat","select","view","firstPage","DivWrapper","sytled","div","TitleWrapper","InputWrapper","input","InputData","useState","autoFocus","onKeyPress","e","inputValue","target","value","which","inputId","GetStudentId","then","result","id","length","dateAttend","created","thisDate","Date","toISOString","substring","window","location","reload","alert","handleChange","GlobalStyled","createGlobalStyle","App","className","ReactDOM","render","document","getElementById"],"mappings":"8JAAO,IAAMA,EAAe,SAACC,GACzB,IAGMC,EAAe,CACjB,CACE,OAAU,CACR,QAAW,CACPD,MAKV,OAXS,IADIE,EAAQ,IACZ,CAAa,CAACC,OAAQ,sBAAsBC,KAAK,oBAWnDA,CAAK,sBAAOC,OAAOJ,ICbnBK,EAAS,SAACC,GACrB,IACIH,EAAO,IADIF,EAAQ,IACZ,CAAa,CAAEC,OAAQ,sBAAuBC,KAAK,qBAC1DI,EAAOD,EAAkBE,OAAOD,KACpCE,QAAQC,IAAI,SAAUH,GACtB,IAAII,EAAkB,aAAaC,OAAOL,GAAMK,OAAO,MAIvD,OAHiBT,EAAK,sBACnBU,OAAO,CAAEF,kBAAiBG,KAAM,YAAaN,OAAQ,CAAC,UAAW,aACjEO,a,srBCNE,IAAMC,EAAaC,IAAOC,IAAV,KAQVC,EAAeF,IAAOC,IAAV,KAUZE,EAAeH,IAAOI,MAAV,KCoCVC,MAlDG,WAAO,IAAD,EACcC,mBAAS,IADvB,6BAEtB,OACE,6BACE,kBAACP,EAAD,KACE,kBAACG,EAAD,6CACA,kBAACC,EAAD,CAAcI,WAAS,EAACC,WAAY,SAACC,GAAD,OAM5C,SAAsBA,GACpB,IAAMC,EAAaD,EAAEE,OAAOC,MAE5B,GADApB,QAAQC,IAAI,QAASgB,EAAEE,OAAOE,OACd,KAAZJ,EAAEI,MAAc,CAClBrB,QAAQC,IAAI,sBACZD,QAAQC,IAAIiB,GCvBT,SAAsBI,GAC3B,IACI5B,EAAO,IADIF,EAAQ,IACZ,CAAa,CAAEC,OAAQ,sBAAuBC,KACvD,qBAEEQ,EAAkB,WAAWC,OAAOmB,GAASnB,OAAO,MAExD,OAAOT,EAAK,SACTU,OAAO,CAAEF,kBAAiBG,KAAM,YAChCC,YDeYiB,CAAaL,GACnBM,MAAK,SAAAC,GACV,GAAiB,MAAbA,EAAO,IAA8B,MAAhBA,EAAO,GAAGC,GAAY,CAC7C,IAAM7B,EAAoB4B,EAAO,GACpB7B,EAAOC,GACb2B,MAAK,SAAAC,GAEV,GADAzB,QAAQC,IAAI,WAAYwB,GACrBA,EAAOE,OAAS,EAAG,CACpB,IAAMC,EAAaH,EAAOA,EAAOE,OAAS,GAAG5B,OAAO8B,QACpD7B,QAAQC,IAAI,WAAY2B,GACxB,IACME,GADK,IAAIC,MACKC,cAAcC,UAAU,EAAG,IAC/CjC,QAAQC,IAAI,cAAe6B,GACxBA,IAAaF,IACd5B,QAAQC,IAAI,oBACZiC,OAAOC,SAASC,UAGN/C,EAAaQ,EAAkB6B,IACrCF,MAAK,SAAAC,GACXzB,QAAQC,IAAI,uBAAwBwB,GACpCS,OAAOC,SAASC,oBAIpBC,MAAM,iEArCqCC,CAAarB,S,k2CETzD,IAAMsB,EAAeC,YAAH,KCUVC,MATf,WACE,OACE,yBAAKC,UAAU,OACb,kBAACH,EAAD,MACA,kBAAC,EAAD,QCJNI,IAASC,OAAO,kBAAC,EAAD,MAASC,SAASC,eAAe,U","file":"static/js/main.8e867d07.chunk.js","sourcesContent":["export const CreateRecord = (studentId) => {\n    var Airtable = require('airtable');\n    var base = new Airtable({apiKey: 'key3fX4iWEdGotDwW'}).base('appvWyF7JgnpEYfm2');\n\n    const dataToCreate = [\n        {\n          \"fields\": {\n            \"Student\": [\n                studentId\n            ]\n          }\n        }\n      ]\n      return base('签到表').create(dataToCreate);\n\n}","export const Verify = (studentInfomation) => {\n  var Airtable = require('airtable');\n  var base = new Airtable({ apiKey: 'key3fX4iWEdGotDwW' }).base('appvWyF7JgnpEYfm2');\n  let name = studentInfomation.fields.name\n  console.log(\"name: \", name);\n  let filterByFormula = \"AND(name='\".concat(name).concat(\"')\");\n  let outputList = base(\"签到表\")\n    .select({ filterByFormula, view: \"Grid view\", fields: [\"created\", \"Student\"] })\n    .firstPage()\n  return outputList\n}\n\n","import sytled from 'styled-components'\n\nexport const DivWrapper = sytled.div`\n    position: fixed;\n    top: 50%;\n    left: 50%;\n    margin-top: -50px;\n    margin-left: -150px;\n`\n\nexport const TitleWrapper = sytled.div`\n    width: 100%;\n    display: block;\n    font-family: Tahoma;\n    font-size: 39px;\n    color: #555555;\n    line-height: 1.2;\n    text-align: center;\n`\n\nexport const InputWrapper = sytled.input`\n    outline-style: none ;\n    border: 1px solid #ccc; \n    border-radius: 3px;\n    padding: 13px 14px;\n    width: 280px;\n    font-size: 14px;\n    font-weight: 700;\n    font-family: \"Microsoft soft\";\n`\n","import React, { useState } from \"react\";\nimport { GetStudentId } from \"./airtable/receive\";\nimport { CreateRecord } from \"./airtable/create\";\nimport { Verify } from \"./airtable/verify\";\nimport { TitleWrapper, DivWrapper, InputWrapper } from \"./inputStyled\";\n\nconst InputData = () => {\n  const [inputValue, setInputValue] = useState('')\n  return (\n    <div>\n      <DivWrapper>\n        <TitleWrapper>钢琴公寓签到</TitleWrapper>\n        <InputWrapper autoFocus onKeyPress={(e) => handleChange(e)} />\n      </DivWrapper>\n    </div>\n  );\n}\n\nfunction handleChange(e) {\n  const inputValue = e.target.value;\n  console.log(\"input\", e.target.which);\n  if (e.which === 13) {\n    console.log(\"扫码机\");\n    console.log(inputValue);\n    let record = GetStudentId(inputValue);\n    record.then(result => {\n      if (result[0] != null && result[0].id != null) {\n        const studentInfomation = result[0]\n        let verify = Verify(studentInfomation)\n        verify.then(result => {\n          console.log('verify: ', result)\n          if(result.length > 0) {\n            const dateAttend = result[result.length - 1].fields.created\n            console.log('latest: ', dateAttend)\n            const dt = new Date();\n            const thisDate = dt.toISOString().substring(0, 10);\n            console.log('this date: ', thisDate)\n            if(thisDate === dateAttend) {\n              console.log('already attended')\n              window.location.reload();\n            }\n          }\n          let created = CreateRecord(studentInfomation.id);\n          created.then(result => {\n            console.log('sign in, record is: ', result)\n            window.location.reload();\n          })\n        })\n      } else {\n        alert('没有此ID， 请重新输入')\n      }\n    });\n  }\n}\n\n\nexport default InputData;\n","export function GetStudentId(inputId) {\n  var Airtable = require(\"airtable\");\n  var base = new Airtable({ apiKey: \"key3fX4iWEdGotDwW\" }).base(\n    \"appvWyF7JgnpEYfm2\"\n  );\n  var filterByFormula = \"AND(Id='\".concat(inputId).concat(\"')\");\n\n  return base(\"basic\")\n    .select({ filterByFormula, view: \"RawData\" })\n    .firstPage();\n}\n","import { createGlobalStyle } from \"styled-components\";\n\n\nexport const GlobalStyled = createGlobalStyle`\n    /* reset.css */\n    html, body, div, span, applet, object, iframe,\n    h1, h2, h3, h4, h5, h6, p, blockquote, pre,\n    a, abbr, acronym, address, big, cite, code,\n    del, dfn, em, img, ins, kbd, q, s, samp,\n    small, strike, strong, sub, sup, tt, var,\n    b, u, i, center,\n    dl, dt, dd, ol, ul, li,\n    fieldset, form, label, legend,\n    table, caption, tbody, tfoot, thead, tr, th, td,\n    article, aside, canvas, details, embed, \n    figure, figcaption, footer, header, hgroup, \n    menu, nav, output, ruby, section, summary,\n    time, mark, audio, video {\n        margin: 0;\n        padding: 0;\n        border: 0;\n        font-size: 100%;\n        font: inherit;\n        vertical-align: baseline;\n    }\n    /* HTML5 display-role reset for older browsers */\n    article, aside, details, figcaption, figure, \n    footer, header, hgroup, menu, nav, section {\n        display: block;\n    }\n    body {\n\n        background-color: #2196F3;\n        line-height: 1;\n    }\n    ol, ul {\n        list-style: none;\n    }\n    blockquote, q {\n        quotes: none;\n    }\n    blockquote:before, blockquote:after,\n    q:before, q:after {\n        content: '';\n        content: none;\n    }\n    table {\n        border-collapse: collapse;\n        border-spacing: 0;\n    }\n`;\n","import React from 'react';\nimport InputData from'./InputData'\nimport {GlobalStyled} from './style.js';\n\nfunction App() {\n  return (\n    <div className=\"App\">\n      <GlobalStyled/>\n      <InputData />\n    </div>\n  );\n}\n\nexport default App;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\n\nReactDOM.render(<App />, document.getElementById('root'));\n"],"sourceRoot":""}